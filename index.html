<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WeatherScope - Real Weather Data</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <meta name="apple-mobile-web-app-title" content="WeatherScope" />
    <meta name="apple-mobile-web-app-status-bar-style"
    content="black-translucent/>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <!-- App icons for iOS Home Screen -->
    <link rel="apple-touch-icon" href="icon.png" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        background: #202434;
      }

      html {
        background: #202434;
        min-height: 100vh;

        /* Make background extend under the notch & home indicator */
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
      }

      html {
        overflow-x: hidden;
        width: 100%;
      }

      :root {
        --background: hsl(220, 15%, 6%);
        --foreground: hsl(210, 40%, 98%);
        --card: hsl(222, 10%, 12%);
        --card-foreground: hsl(210, 40%, 96%);
        --primary: hsl(200, 100%, 50%);
        --primary-foreground: hsl(210, 40%, 98%);
        --secondary: hsl(217, 33%, 17%);
        --muted: hsl(215, 28%, 17%);
        --muted-foreground: hsl(217, 10%, 65%);
        --accent: hsl(35, 100%, 60%);
        --border: hsl(215, 28%, 17%);
        --input: hsl(215, 28%, 17%);
      }

      body {
        font-family: "Inter", system-ui, sans-serif;
        background: linear-gradient(
          135deg,
          hsl(220, 40%, 8%) 0%,
          hsl(215, 50%, 12%) 100%
        );
        color: var(--foreground);
        min-height: 100vh;
        line-height: 1.6;
        overflow-x: hidden;
        width: 100%;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        width: 100%;
        box-sizing: border-box;
      }

      /* Header Styles */
      .header {
        position: sticky;
        top: 0;
        z-index: 50;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--border);
      }

      .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 4rem;
        padding: 0 1rem;
        width: 100%;
        box-sizing: border-box;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .logo-icon {
        width: 2rem;
        height: 2rem;
        background: linear-gradient(135deg, var(--primary), var(--accent));
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .logo-text {
        font-size: 1.25rem;
        font-weight: 600;
      }

      .search-container {
        flex: 1;
        max-width: 28rem;
        margin: 0 1rem;
        position: relative;
        min-width: 0;
      }

      .search-input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        background: var(--input);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        color: var(--foreground);
        font-size: 1rem;
        transition: all 0.2s;
        box-sizing: border-box;
        min-width: 0;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
      }

      .search-icon {
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--muted-foreground);
      }

      .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        margin-top: 0.25rem;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        z-index: 50;
        max-height: 15rem;
        overflow-y: auto;
        display: none;
        /* Hide scrollbar but keep scrolling functionality */
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE and Edge */
      }

      /* Hide scrollbar for Webkit browsers */
      .search-results::-webkit-scrollbar {
        display: none;
      }

      .search-result {
        padding: 0.75rem 1rem;
        cursor: pointer;
        transition: background-color 0.2s;
        border: none;
        background: none;
        color: var(--foreground);
        text-align: left;
        width: 100%;
      }

      .search-result:hover {
        background: rgba(255, 255, 255, 0.05);
      }

      .result-name {
        font-weight: 500;
      }

      .result-location {
        font-size: 0.875rem;
        color: var(--muted-foreground);
      }

      .actions {
        display: flex;
        align-items: center;
      }

      .btn {
        background: none;
        border: none;
        color: var(--foreground);
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 0.25rem;
        transition: background-color 0.2s;
      }

      .btn:hover {
        background: var(--secondary);
      }

      /* Weather Display Styles */
      .main-content {
        padding: 2rem 1rem;
      }

      .current-weather {
        background: linear-gradient(
          135deg,
          hsl(45, 100%, 70%) 0%,
          hsl(35, 100%, 60%) 50%,
          hsl(25, 100%, 55%) 100%
        );
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        color: white;
        position: relative;
        overflow: hidden;
      }

      .current-weather.cloudy {
        background: linear-gradient(
          135deg,
          hsl(215, 25%, 35%) 0%,
          hsl(210, 30%, 45%) 50%,
          hsl(205, 35%, 55%) 100%
        );
      }

      .current-weather.rainy {
        background: linear-gradient(
          135deg,
          hsl(210, 60%, 25%) 0%,
          hsl(215, 70%, 35%) 50%,
          hsl(220, 80%, 45%) 100%
        );
      }

      .weather-pattern {
        position: absolute;
        top: 1rem;
        right: 1rem;
        width: 8rem;
        height: 8rem;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.2);
        opacity: 0.1;
      }

      .weather-main {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        position: relative;
        z-index: 10;
      }

      .weather-info {
        flex: 1;
      }

      .location-info {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .location-name {
        font-size: 1.125rem;
        margin-left: 0.5rem;
        margin-right: 0.4rem;
      }

      .last-updated {
        font-size: 0.875rem;
        opacity: 0.75;
        margin-bottom: 1rem;
      }

      .temperature-display {
        display: flex;
        align-items: flex-start;
        gap: 2rem;
      }

      .temperature {
        font-size: clamp(3rem, 8vw, 5rem);
        font-weight: 300;
        line-height: 1;
      }

      .condition {
        font-size: 1.125rem;
        margin-bottom: 0.5rem;
      }

      .feels-like {
        font-size: 0.875rem;
        opacity: 0.75;
      }

      .weather-icon {
        font-size: 4rem;
        opacity: 0.9;
        margin-top: -0.8rem;
      }

      .weather-controls {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 1rem;
      }

      .temp-toggle {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 0.5rem;
        padding: 0.25rem;
        display: flex;
      }

      .temp-btn {
        padding: 0.5rem 1rem;
        background: none;
        border: none;
        color: white;
        border-radius: 0.25rem;
        cursor: pointer;
        transition: all 0.2s;
      }

      .temp-btn.active {
        background: white;
        color: rgb(0, 0, 0);
      }

      .high-low {
        text-align: right;
      }

      .high-low-label {
        font-size: 0.875rem;
        opacity: 0.75;
      }

      .high-low-temps {
        font-size: 1.125rem;
      }

      /* Grid Layout */
      .weather-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      @media (min-width: 769px) and (max-width: 1023px) {
        .search-container {
          max-width: 24rem;
        }

        .details-grid {
          grid-template-columns: repeat(3, 1fr);
        }

        .current-weather {
          padding: 2rem 1.5rem;
        }

        .card {
          padding: 1.25rem;
        }

        .forecast-item {
          padding: 1rem;
        }

        .hourly-item {
          min-width: 5rem;
        }
      }

      @media (min-width: 1024px) {
        .weather-grid {
          grid-template-columns: 2fr 1fr;
        }

        .search-container {
          max-width: 28rem;
        }

        .details-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .current-weather {
          padding: 2.5rem 2rem;
        }
      }

      @media (min-width: 1280px) {
        .container {
          max-width: 1280px;
        }

        .details-grid {
          grid-template-columns: repeat(3, 1fr);
        }

        .weather-grid {
          gap: 2.5rem;
        }

        .forecast-section {
          gap: 2rem;
        }
      }

      .forecast-section {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      /* Card Styles */
      .card {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 1rem;
        padding: 1.5rem;
      }

      .card-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        font-size: 1.125rem;
        font-weight: 600;
      }

      .card-title i {
        color: var(--primary);
      }

      /* Forecast Styles */
      .forecast-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem;
        border-radius: 0.5rem;
        transition: background-color 0.2s;
        width: 100%;
        box-sizing: border-box;
        min-width: 0;
      }

      .forecast-item:hover {
        background: rgba(255, 255, 255, 0.05);
      }

      .forecast-left {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex: 1;
        min-width: 0;
      }

      .forecast-day {
        min-width: 2.5rem;
        width: 2.5rem;
        text-align: center;
        flex-shrink: 0;
      }

      .forecast-date {
        font-weight: 500;
      }

      .forecast-date-sub {
        font-size: 0.875rem;
        color: var(--muted-foreground);
      }

      .forecast-icon {
        font-size: 1.5rem;
        color: #fbbf24;
      }

      .forecast-condition {
        font-weight: 500;
      }

      .forecast-description {
        font-size: 0.875rem;
        color: var(--muted-foreground);
      }

      .forecast-right {
        text-align: right;
      }

      .forecast-temps {
        font-weight: 600;
      }

      .forecast-precipitation {
        font-size: 0.875rem;
        color: var(--muted-foreground);
      }

      /* Hourly Forecast */
      .hourly-container {
        display: flex;
        gap: 0.75rem;
        overflow-x: auto;
        padding-bottom: 0.5rem;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }

      .hourly-container::-webkit-scrollbar {
        display: none;
      }

      .hourly-item {
        flex-shrink: 0;
        text-align: center;
        padding: 0.75rem 0.5rem;
        border-radius: 0.5rem;
        min-width: 4rem;
        width: 4rem;
        transition: background-color 0.2s;
        box-sizing: border-box;
      }

      .hourly-item:hover {
        background: rgba(255, 255, 255, 0.05);
      }

      .hourly-time {
        font-size: 0.875rem;
        color: var(--muted-foreground);
        margin-bottom: 0.5rem;
      }

      .hourly-icon {
        font-size: 1.25rem;
        color: #fbbf24;
        margin-bottom: 0.5rem;
      }

      .hourly-temp {
        font-weight: 600;
      }

      .hourly-precipitation {
        font-size: 0.75rem;
        color: var(--muted-foreground);
        margin-top: 0.25rem;
      }

      /* Weather Details */
      .details-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }

      .detail-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 1rem;
        border-radius: 0.5rem;
      }

      .detail-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
      }

      .detail-header i {
        color: var(--primary);
      }

      .detail-label {
        font-size: 0.875rem;
        color: var(--muted-foreground);
      }

      .detail-value {
        font-size: 1.25rem;
        font-weight: 600;
      }

      .detail-unit {
        font-size: 0.75rem;
        color: var(--muted-foreground);
      }

      /* Sun/Moon Info */
      .sun-moon-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 0.5rem;
        margin-bottom: 0.75rem;
      }

      .sun-moon-left {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .sun-icon {
        color: #fbbf24;
      }

      .moon-icon {
        color: #93c5fd;
      }

      .sunset-icon {
        color: #fb923c;
      }

      /* Air Quality */
      .aqi-display {
        text-align: center;
        margin-bottom: 1rem;
      }

      .aqi-circle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 5rem;
        height: 5rem;
        border-radius: 50%;
        background: rgba(34, 197, 94, 0.2);
        margin-bottom: 0.5rem;
      }

      .aqi-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: #22c55e;
      }

      .aqi-status {
        font-weight: 500;
        color: #22c55e;
      }

      .aqi-details {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
      }

      .aqi-item {
        text-align: center;
        padding: 0.5rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 0.25rem;
      }

      .aqi-label {
        font-size: 0.875rem;
        color: var(--muted-foreground);
      }

      .aqi-item-value {
        font-weight: 500;
      }

      /* Loading States */
      .loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 25rem;
      }

      .spinner {
        width: 3rem;
        height: 3rem;
        border: 2px solid var(--muted);
        border-top: 2px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Error States */
      .error {
        text-align: center;
        padding: 2rem;
      }

      .error-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .error-message {
        color: var(--muted-foreground);
        margin-bottom: 1rem;
      }

      .retry-btn {
        background: var(--primary);
        color: var(--primary-foreground);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        cursor: pointer;
        font-weight: 500;
        transition: opacity 0.2s;
      }

      .retry-btn:hover {
        opacity: 0.9;
      }

      /* Mobile Responsive */
      /* Ultra Responsive Mobile First Design */
      @media (max-width: 480px) {
        * {
          box-sizing: border-box;
        }

        body {
          overflow-x: hidden;
          width: 100vw;
          max-width: 100vw;
        }

        .container {
          padding: 0 0.5rem;
          width: 100%;
          max-width: 100vw;
          box-sizing: border-box;
        }

        .header {
          width: 100%;
          max-width: 100vw;
        }

        .nav {
          padding: 0 0.5rem;
          height: 3.5rem;
          width: 100%;
          max-width: 100vw;
          box-sizing: border-box;
        }

        .logo {
          flex-shrink: 0;
        }

        .logo-text {
          display: none;
        }

        .logo-icon {
          width: 1.75rem;
          height: 1.75rem;
        }

        .search-container {
          margin: 0 0.25rem;
          max-width: none;
          flex: 1;
          min-width: 0;
          width: auto;
        }

        .actions {
          gap: 0.125rem;
          flex-shrink: 0;
        }

        .btn {
          padding: 0.25rem;
          min-width: 2rem;
          height: 2rem;
        }

        .btn i {
          font-size: 0.875rem;
        }

        .main {
          padding: 0.5rem 0;
          width: 100%;
        }

        .current-weather {
          margin-top: 40px;
          padding: 0.75rem;
          width: 100%;
          box-sizing: border-box;
        }

        .location {
          font-size: 0.875rem;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .temperature {
          font-size: clamp(2rem, 12vw, 3rem);
        }

        .condition {
          font-size: 0.875rem;
        }

        .high-low-temps {
          font-size: 0.875rem;
        }

        .card {
          padding: 0.75rem;
          width: 100%;
          box-sizing: border-box;
        }

        .card-title {
          font-size: 0.875rem;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .forecast-left {
          gap: 0.25rem;
          flex: 1;
          min-width: 0;
        }

        .forecast-day {
          min-width: 2rem;
          width: 2rem;
        }

        .forecast-date {
          font-size: 0.75rem;
        }

        .forecast-date-sub {
          font-size: 0.625rem;
        }

        .forecast-icon {
          font-size: 1rem;
        }

        .forecast-condition {
          font-size: 0.75rem;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          flex: 1;
          min-width: 0;
        }

        .forecast-description {
          display: none;
        }

        .forecast-right {
          flex-shrink: 0;
        }

        .forecast-temps {
          font-size: 0.875rem;
        }

        .details-grid {
          grid-template-columns: 1fr;
          gap: 0.5rem;
          width: 100%;
        }

        .detail-item {
          padding: 0.5rem;
          width: 100%;
          box-sizing: border-box;
        }

        .detail-value {
          font-size: 1rem;
        }

        .hourly-container {
          gap: 0.5rem;
          padding-bottom: 0.25rem;
        }

        .hourly-item {
          min-width: 3.5rem;
          width: 3.5rem;
          padding: 0.375rem 0.25rem;
        }

        .hourly-time {
          font-size: 0.625rem;
        }

        .hourly-icon {
          font-size: 0.875rem;
        }

        .hourly-temp {
          font-size: 0.75rem;
        }

        .hourly-precipitation {
          font-size: 0.625rem;
        }

        .footer {
          padding: 0.75rem 0;
          width: 100%;
        }

        .footer-content {
          flex-direction: column;
          gap: 0.25rem;
          text-align: center;
          font-size: 0.75rem;
        }
      }

      @media (min-width: 481px) and (max-width: 768px) {
        body {
          overflow-x: hidden;
          max-width: 100vw;
        }

        .container {
          width: 100%;
          max-width: 100vw;
          box-sizing: border-box;
        }

        .nav {
          padding: 0 1rem;
          width: 100%;
          max-width: 100vw;
          box-sizing: border-box;
        }

        .search-container {
          margin: 0 1rem;
          max-width: 20rem;
          min-width: 0;
        }

        .details-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
        }

        .forecast-item {
          padding: 1rem 0.75rem;
          width: 100%;
          box-sizing: border-box;
        }

        .hourly-item {
          min-width: 4rem;
          width: 4rem;
          padding: 0.5rem 0.375rem;
        }

        .card {
          width: 100%;
          box-sizing: border-box;
        }
      }

      /* Ultra Compact Design for Very Small Screens */
      @media (max-width: 680px) {
        /* Vertical Stack Layout for all sections */
        .forecast-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.5rem;
          padding: 0.75rem 0.5rem;
        }

        .forecast-left {
          width: 100%;
          justify-content: space-between;
          gap: 0.5rem;
        }

        .forecast-day {
          min-width: auto;
          width: auto;
          text-align: left;
        }

        .forecast-condition {
          flex: none;
          white-space: normal;
          overflow: visible;
          text-overflow: none;
        }

        .forecast-description {
          display: block;
          font-size: 0.625rem;
          margin-top: 0.125rem;
        }

        .forecast-right {
          width: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        /* Hourly forecast - stack in 2 rows */
        .hourly-container {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 0.375rem;
          overflow: visible;
        }

        .hourly-item {
          min-width: auto;
          width: 100%;
          padding: 0.375rem 0.25rem;
          font-size: 0.75rem;
        }

        .hourly-time {
          font-size: 0.625rem;
          margin-bottom: 0.25rem;
        }

        .hourly-icon {
          font-size: 0.875rem;
          margin-bottom: 0.25rem;
        }

        .hourly-temp {
          font-size: 0.75rem;
          font-weight: 600;
        }

        .hourly-precipitation {
          font-size: 0.625rem;
          margin-top: 0.125rem;
        }

        /* Sun/Moon info - vertical stack */
        .sun-moon-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.375rem;
          padding: 0.625rem;
        }

        .sun-moon-left {
          width: 100%;
          justify-content: flex-start;
        }

        .sun-moon-right {
          width: 100%;
          text-align: left;
          font-size: 0.875rem;
        }

        /* Air quality - stack vertically */
        .air-quality-header {
          margin-bottom: 0.75rem;
        }

        .air-quality-main {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .air-quality-level {
          text-align: left;
          margin-bottom: 0.5rem;
        }

        .air-quality-components {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0.375rem;
        }

        .air-component {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 0.375rem;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 0.25rem;
          font-size: 0.75rem;
        }

        /* Make cards more compact */
        .card {
          padding: 0.75rem 0.5rem;
        }

        .card-title {
          font-size: 0.875rem;
          margin-bottom: 0.75rem;
        }

        /* Weather details - single column, more compact */
        .details-grid {
          grid-template-columns: 1fr;
          gap: 0.375rem;
        }

        .detail-item {
          padding: 0.5rem;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .detail-unit {
          display: none;
        }

        .detail-header {
          margin-bottom: 0;
        }

        .detail-value {
          font-size: 0.875rem;
          text-align: right;
        }
      }

      @media (max-width: 768px) {
        .weather-main {
          flex-direction: column;
          gap: 1rem;
        }

        .weather-controls {
          align-self: flex-end;
          flex-direction: row;
          align-items: center;
        }

        .details-grid {
          grid-template-columns: 1fr;
        }
      }

      /* Hidden utility */
      .hidden {
        display: none !important;
      }

      /* Footer */
      .footer {
        border-top: 1px solid var(--border);
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(8px);
        margin-top: 4rem;
      }

      .footer-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 1.5rem 1rem;
        gap: 1rem;
      }

      @media (min-width: 768px) {
        .footer-content {
          flex-direction: row;
        }
      }

      .footer-left {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .footer-text {
        font-size: 0.875rem;
        color: var(--muted-foreground);
      }

      .status-indicator {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .status-dot {
        width: 0.5rem;
        height: 0.5rem;
        background: #22c55e;
        border-radius: 50%;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <nav class="nav container">
        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-cloud-sun"></i>
          </div>
          <h1 class="logo-text">WeatherScope</h1>
        </div>

        <div class="search-container">
          <div style="position: relative">
            <i class="fas fa-search search-icon"></i>
            <input
              type="text"
              class="search-input"
              placeholder="Search for a city..."
              id="searchInput"
            />
          </div>
          <div class="search-results" id="searchResults"></div>
        </div>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content container">
      <!-- Loading State -->
      <div class="loading hidden" id="loadingState">
        <div class="spinner"></div>
        <p>Loading weather data...</p>
      </div>

      <!-- Error State -->
      <div class="error hidden" id="errorState">
        <h2 class="error-title">Weather data unavailable</h2>
        <p class="error-message">
          Unable to fetch weather data. Please try again later.
        </p>
        <button class="retry-btn" onclick="retryWeatherLoad()">
          Try Again
        </button>
      </div>

      <!-- Weather Content -->
      <div id="weatherContent" class="hidden">
        <!-- Current Weather -->
        <div class="current-weather" id="currentWeather">
          <div class="weather-pattern"></div>
          <div class="weather-main">
            <div class="weather-info">
              <div class="location-info">
                <i class="fas fa-map-marker-alt"></i>
                <span class="location-name" id="locationName"
                  >San Francisco</span
                >
                <span class="location-country" id="locationCountry">US</span>
              </div>
              <div class="last-updated" id="lastUpdated">
                Updated 5 minutes ago
              </div>
              <div class="temperature-display">
                <div>
                  <div class="temperature" id="temperature">18°C</div>
                  <div class="condition" id="condition">Broken Clouds</div>
                  <div class="feels-like" id="feelsLike">Feels like 17°C</div>
                </div>
                <div class="weather-icon">
                  <i id="weatherIcon" class="fas fa-cloud"></i>
                </div>
              </div>
            </div>

            <div class="weather-controls">
              <div class="temp-toggle">
                <button
                  class="temp-btn active"
                  onclick="setTempUnit('celsius')"
                  id="celsiusBtn"
                >
                  °C
                </button>
                <button
                  class="temp-btn"
                  onclick="setTempUnit('fahrenheit')"
                  id="fahrenheitBtn"
                >
                  °F
                </button>
              </div>
              <div class="high-low">
                <div class="high-low-label">Today</div>
                <div class="high-low-temps">
                  <span id="highTemp">22°</span> /
                  <span id="lowTemp" style="opacity: 0.7">15°</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="weather-grid">
          <!-- Left Column: Forecasts -->
          <div class="forecast-section">
            <!-- 5-Day Forecast -->
            <div class="card">
              <h3 class="card-title">
                <i class="fas fa-calendar-alt"></i>
                5-Day Forecast
              </h3>
              <div id="dailyForecast"></div>
            </div>

            <!-- Hourly Forecast -->
            <div class="card">
              <h3 class="card-title">
                <i class="fas fa-clock"></i>
                Today's Hourly Forecast
              </h3>
              <div class="hourly-container" id="hourlyForecast"></div>
            </div>
          </div>

          <!-- Right Column: Details -->
          <div>
            <!-- Weather Details -->
            <div class="card" style="margin-bottom: 1.5rem">
              <h3 class="card-title">
                <i class="fas fa-info-circle"></i>
                Weather Details
              </h3>
              <div class="details-grid" id="weatherDetails"></div>
            </div>

            <!-- Sun & Moon -->
            <div class="card" style="margin-bottom: 1.5rem">
              <h3 class="card-title">
                <i class="fas fa-sun"></i>
                Sun & Moon
              </h3>
              <div id="sunMoonInfo"></div>
            </div>

            <!-- Air Quality -->
            <div class="card hidden" id="airQualityCard">
              <h3 class="card-title">
                <i class="fas fa-leaf"></i>
                Air Quality
              </h3>
              <div class="aqi-display">
                <div class="aqi-circle">
                  <span class="aqi-value" id="aqiValue">52</span>
                </div>
                <div class="aqi-status" id="aqiStatus">Good</div>
              </div>
              <div class="aqi-details" id="aqiDetails"></div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content container">
        <div class="footer-left">
          <span class="footer-text"
            >Weather data provided by OpenWeatherMap API</span
          >
          <div class="status-indicator">
            <div class="status-dot"></div>
            <span class="footer-text">Live data</span>
          </div>
        </div>
        <div class="footer-text" id="footerLastUpdated">
          Last updated: Never
        </div>
      </div>
    </footer>

    <script>
      // Global variables
      let currentLocation = null;
      let tempUnit = "celsius";
      let searchTimeout = null;

      // Replace with your OpenWeatherMap API key
      const API_KEY = "aa1fd1229a23bf57bbf72bf0f9fd82f4";

      // Initialize the app
      document.addEventListener("DOMContentLoaded", function () {
        initializeApp();
      });

      function initializeApp() {
        setupSearchInput();
        getUserLocation();
      }

      function setupSearchInput() {
        const searchInput = document.getElementById("searchInput");
        const searchResults = document.getElementById("searchResults");

        searchInput.addEventListener("input", function (e) {
          const query = e.target.value.trim();

          if (searchTimeout) {
            clearTimeout(searchTimeout);
          }

          if (query.length >= 2) {
            searchTimeout = setTimeout(() => {
              searchLocations(query);
            }, 300);
          } else {
            hideSearchResults();
          }
        });

        // Hide search results when clicking outside
        document.addEventListener("click", function (e) {
          if (
            !searchInput.contains(e.target) &&
            !searchResults.contains(e.target)
          ) {
            hideSearchResults();
          }
        });
      }

      async function searchLocations(query) {
        try {
          const response = await fetch(
            `https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(
              query
            )}&limit=5&appid=${API_KEY}`
          );
          const data = await response.json();
          displaySearchResults(data);
        } catch (error) {
          console.error("Search failed:", error);
          hideSearchResults();
        }
      }

      function displaySearchResults(results) {
        const searchResults = document.getElementById("searchResults");

        if (results.length === 0) {
          searchResults.innerHTML =
            '<div style="padding: 1rem; text-align: center; color: var(--muted-foreground);">No locations found</div>';
          searchResults.style.display = "block";
          return;
        }

        searchResults.innerHTML = results
          .map(
            (result) => `
                <button class="search-result" onclick="selectLocation(${
                  result.lat
                }, ${result.lon}, '${result.name}', '${result.country}')">
                    <div class="result-name">${result.name}</div>
                    <div class="result-location">${
                      result.state ? result.state + ", " : ""
                    }${result.country}</div>
                </button>
            `
          )
          .join("");

        searchResults.style.display = "block";
      }

      function hideSearchResults() {
        document.getElementById("searchResults").style.display = "none";
      }

      function selectLocation(lat, lon, name, country) {
        currentLocation = { lat, lon, name, country };
        document.getElementById("searchInput").value = "";
        hideSearchResults();
        loadWeatherData();
      }

      function getUserLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              currentLocation = {
                lat: position.coords.latitude,
                lon: position.coords.longitude,
              };
              loadWeatherData();
            },
            (error) => {
              console.error("Geolocation error:", error);
              // Default to San Francisco
              currentLocation = { lat: 37.7749, lon: -122.4194 };
              loadWeatherData();
            }
          );
        } else {
          // Default to San Francisco
          currentLocation = { lat: 37.7749, lon: -122.4194 };
          loadWeatherData();
        }
      }

      function getCurrentLocation() {
        if (navigator.geolocation) {
          showLoading();
          navigator.geolocation.getCurrentPosition(
            (position) => {
              currentLocation = {
                lat: position.coords.latitude,
                lon: position.coords.longitude,
              };
              loadWeatherData();
            },
            (error) => {
              console.error("Geolocation error:", error);
              hideLoading();
              alert("Unable to get your current location. Please try again.");
            }
          );
        }
      }

      async function loadWeatherData() {
        if (!currentLocation) return;

        showLoading();

        try {
          const [currentWeather, forecast, airQuality] = await Promise.all([
            fetchCurrentWeather(),
            fetchForecast(),
            fetchAirQuality(),
          ]);

          displayCurrentWeather(currentWeather);
          displayForecast(forecast);
          if (airQuality) {
            displayAirQuality(airQuality);
          }

          hideLoading();
          showWeatherContent();
        } catch (error) {
          console.error("Weather data loading failed:", error);
          hideLoading();
          showError();
        }
      }

      async function fetchCurrentWeather() {
        const response = await fetch(
          `https://api.openweathermap.org/data/2.5/weather?lat=${currentLocation.lat}&lon=${currentLocation.lon}&appid=${API_KEY}&units=metric`
        );

        if (!response.ok) {
          throw new Error("Failed to fetch current weather");
        }

        const data = await response.json();
        return processCurrentWeather(data);
      }

      async function fetchForecast() {
        const response = await fetch(
          `https://api.openweathermap.org/data/2.5/forecast?lat=${currentLocation.lat}&lon=${currentLocation.lon}&appid=${API_KEY}&units=metric`
        );

        if (!response.ok) {
          throw new Error("Failed to fetch forecast");
        }

        return await response.json();
      }

      async function fetchAirQuality() {
        try {
          const response = await fetch(
            `https://api.openweathermap.org/data/2.5/air_pollution?lat=${currentLocation.lat}&lon=${currentLocation.lon}&appid=${API_KEY}`
          );

          if (!response.ok) {
            return null;
          }

          return await response.json();
        } catch (error) {
          console.error("Air quality fetch failed:", error);
          return null;
        }
      }

      function processCurrentWeather(data) {
        return {
          location: {
            name: data.name,
            country: data.sys.country,
          },
          temperature: Math.round(data.main.temp),
          feelsLike: Math.round(data.main.feels_like),
          condition: data.weather[0].main,
          description: data.weather[0].description,
          icon: data.weather[0].icon,
          humidity: data.main.humidity,
          pressure: data.main.pressure,
          visibility: Math.round(data.visibility / 1000),
          windSpeed: Math.round(data.wind?.speed * 3.6 || 0),
          windDirection: getWindDirection(data.wind?.deg || 0),
          uvIndex: 0,
          dewPoint: Math.round(data.main.temp - (100 - data.main.humidity) / 5),
          sunrise: data.sys.sunrise,
          sunset: data.sys.sunset,
          high: Math.round(data.main.temp_max),
          low: Math.round(data.main.temp_min),
          lastUpdated: Date.now(),
        };
      }

      function displayCurrentWeather(weather) {
        // Update location
        document.getElementById("locationName").textContent =
          weather.location.name;
        document.getElementById("locationCountry").textContent =
          weather.location.country;

        // Update last updated
        document.getElementById(
          "lastUpdated"
        ).textContent = `Updated ${formatRelativeTime(weather.lastUpdated)}`;
        document.getElementById(
          "footerLastUpdated"
        ).textContent = `Last updated: ${new Date(
          weather.lastUpdated
        ).toLocaleTimeString()}`;

        // Update temperature and condition
        updateTemperatureDisplay(weather);
        document.getElementById("condition").textContent = weather.condition;

        // Update weather icon
        const iconElement = document.getElementById("weatherIcon");
        iconElement.className = getWeatherIconClass(
          weather.condition,
          weather.icon
        );

        // Update weather card gradient
        const weatherCard = document.getElementById("currentWeather");
        weatherCard.className = `current-weather ${getWeatherGradient(
          weather.condition
        )}`;

        // Update weather details
        displayWeatherDetails(weather);
        displaySunMoonInfo(weather);

        // Store weather data for temperature unit changes
        window.currentWeatherData = weather;
      }

      function updateTemperatureDisplay(weather) {
        const temp = convertTemperature(weather.temperature);
        const feelsLike = convertTemperature(weather.feelsLike);
        const high = convertTemperature(weather.high);
        const low = convertTemperature(weather.low);
        const unit = tempUnit === "celsius" ? "°C" : "°F";

        document.getElementById("temperature").textContent = `${temp}${unit}`;
        document.getElementById(
          "feelsLike"
        ).textContent = `Feels like ${feelsLike}${unit}`;
        document.getElementById("highTemp").textContent = `${high}°`;
        document.getElementById("lowTemp").textContent = `${low}°`;
      }

      function displayWeatherDetails(weather) {
        const detailsContainer = document.getElementById("weatherDetails");
        const unit = tempUnit === "celsius" ? "°C" : "°F";

        detailsContainer.innerHTML = `
                <div class="detail-item">
                    <div class="detail-header">
                        <i class="fas fa-eye"></i>
                        <span class="detail-label">Visibility</span>
                    </div>
                    <div class="detail-value">${weather.visibility} km</div>
                </div>
                <div class="detail-item">
                    <div class="detail-header">
                        <i class="fas fa-tint"></i>
                        <span class="detail-label">Humidity</span>
                    </div>
                    <div class="detail-value">${weather.humidity}%</div>
                </div>
                <div class="detail-item">
                    <div class="detail-header">
                        <i class="fas fa-wind"></i>
                        <span class="detail-label">Wind</span>
                    </div>
                    <div class="detail-value">${weather.windSpeed} km/h</div>
                    <div class="detail-unit">${weather.windDirection}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-header">
                        <i class="fas fa-tachometer-alt"></i>
                        <span class="detail-label">Pressure</span>
                    </div>
                    <div class="detail-value">${weather.pressure}</div>
                    <div class="detail-unit">hPa</div>
                </div>
                <div class="detail-item">
                    <div class="detail-header">
                        <i class="fas fa-sun"></i>
                        <span class="detail-label">UV Index</span>
                    </div>
                    <div class="detail-value">${weather.uvIndex}</div>
                    <div class="detail-unit">Low</div>
                </div>
                <div class="detail-item">
                    <div class="detail-header">
                        <i class="fas fa-thermometer-half"></i>
                        <span class="detail-label">Dew Point</span>
                    </div>
                    <div class="detail-value">${convertTemperature(
                      weather.dewPoint
                    )}${unit}</div>
                </div>
            `;
      }

      function displaySunMoonInfo(weather) {
        const container = document.getElementById("sunMoonInfo");

        container.innerHTML = `
                <div class="sun-moon-item">
                    <div class="sun-moon-left">
                        <i class="fas fa-sun sun-icon"></i>
                        <span>Sunrise</span>
                    </div>
                    <span>${formatTime(weather.sunrise)}</span>
                </div>
                <div class="sun-moon-item">
                    <div class="sun-moon-left">
                        <i class="fas fa-sun sunset-icon"></i>
                        <span>Sunset</span>
                    </div>
                    <span>${formatTime(weather.sunset)}</span>
                </div>
                <div class="sun-moon-item">
                    <div class="sun-moon-left">
                        <i class="fas fa-moon moon-icon"></i>
                        <span>Moon Phase</span>
                    </div>
                    <span>Waning Crescent</span>
                </div>
            `;
      }

      function displayForecast(forecastData) {
        displayDailyForecast(forecastData);
        displayHourlyForecast(forecastData);
      }

      function displayDailyForecast(data) {
        const container = document.getElementById("dailyForecast");

        // Group forecast data by day
        const dailyData = processDailyForecast(data.list);

        container.innerHTML = dailyData
          .slice(0, 5)
          .map(
            (day) => `
                <div class="forecast-item">
                    <div class="forecast-left">
                        <div class="forecast-day">
                            <div class="forecast-date">${day.dayName}</div>
                            <div class="forecast-date-sub">${day.date}</div>
                        </div>
                        <i class="${getWeatherIconClass(
                          day.condition,
                          day.icon
                        )} forecast-icon"></i>
                        <div>
                            <div class="forecast-condition">${
                              day.condition
                            }</div>
                            <div class="forecast-description">${
                              day.description
                            }</div>
                        </div>
                    </div>
                    <div class="forecast-right">
                        <div class="forecast-temps">${convertTemperature(
                          day.high
                        )}° / ${convertTemperature(day.low)}°</div>
                        <div class="forecast-precipitation">Precipitation: ${
                          day.precipitation
                        }%</div>
                    </div>
                </div>
            `
          )
          .join("");
      }

      function getAMPM(timestamp) {
        return new Date(timestamp * 1000)
          .toLocaleTimeString("en-US", {
            hour12: true,
          })
          .slice(-2); // Gets just "AM" or "PM"
      }

      function displayHourlyForecast(data) {
        const container = document.getElementById("hourlyForecast");

        // Use first 8 hours
        const hourlyData = data.list.slice(0, 8);

        container.innerHTML = hourlyData
          .map((hour, index) => {
            const time =
              index === 0 ? `Now ${getAMPM(hour.dt)}` : formatTime(hour.dt);

            return `
                    <div class="hourly-item">
                        <div class="hourly-time">${time}</div>
                        <i class="${getWeatherIconClass(
                          hour.weather[0].main,
                          hour.weather[0].icon
                        )} hourly-icon"></i>
                        <div class="hourly-temp">${convertTemperature(
                          Math.round(hour.main.temp)
                        )}°</div>
                        <div class="hourly-precipitation">${Math.round(
                          (hour.pop || 0) * 100
                        )}%</div>
                    </div>
                `;
          })
          .join("");
      }

      function displayAirQuality(data) {
        if (!data || !data.list || data.list.length === 0) return;

        const aqi = data.list[0];
        const aqiUS = aqi.main.aqi * 20; // Convert to US AQI scale
        const components = aqi.components;

        document.getElementById("aqiValue").textContent = aqiUS;
        document.getElementById("aqiStatus").textContent = getAQIStatus(aqiUS);

        const aqiDetails = document.getElementById("aqiDetails");
        aqiDetails.innerHTML = `
                <div class="aqi-item">
                    <div class="aqi-label">PM2.5</div>
                    <div class="aqi-item-value">${Math.round(
                      components.pm2_5 || 0
                    )}</div>
                </div>
                <div class="aqi-item">
                    <div class="aqi-label">PM10</div>
                    <div class="aqi-item-value">${Math.round(
                      components.pm10 || 0
                    )}</div>
                </div>
            `;

        // Update AQI colors
        const aqiColor = getAQIColor(aqiUS);
        document.getElementById("aqiValue").style.color = aqiColor;
        document.getElementById("aqiStatus").style.color = aqiColor;

        // Show air quality card
        document.getElementById("airQualityCard").classList.remove("hidden");
      }

      // Utility functions
      function convertTemperature(celsius) {
        if (tempUnit === "fahrenheit") {
          return Math.round((celsius * 9) / 5 + 32);
        }
        return celsius;
      }

      function setTempUnit(unit) {
        tempUnit = unit;

        // Update button states
        document
          .getElementById("celsiusBtn")
          .classList.toggle("active", unit === "celsius");
        document
          .getElementById("fahrenheitBtn")
          .classList.toggle("active", unit === "fahrenheit");

        // Update temperature displays if weather data exists
        if (window.currentWeatherData) {
          updateTemperatureDisplay(window.currentWeatherData);
          displayWeatherDetails(window.currentWeatherData);

          // Update forecasts if they exist
          if (window.forecastData) {
            displayDailyForecast(window.forecastData);
            displayHourlyForecast(window.forecastData);
          }
        }
      }

      function getWeatherIconClass(condition, icon) {
        const iconMap = {
          "01d": "fas fa-sun",
          "01n": "fas fa-moon",
          "02d": "fas fa-cloud-sun",
          "02n": "fas fa-cloud-moon",
          "03d": "fas fa-cloud",
          "03n": "fas fa-cloud",
          "04d": "fas fa-cloud",
          "04n": "fas fa-cloud",
          "09d": "fas fa-cloud-rain",
          "09n": "fas fa-cloud-rain",
          "10d": "fas fa-cloud-sun-rain",
          "10n": "fas fa-cloud-moon-rain",
          "11d": "fas fa-bolt",
          "11n": "fas fa-bolt",
          "13d": "fas fa-snowflake",
          "13n": "fas fa-snowflake",
          "50d": "fas fa-smog",
          "50n": "fas fa-smog",
        };

        if (icon && iconMap[icon]) {
          return iconMap[icon];
        }

        // Fallback based on condition
        const condition_lower = condition.toLowerCase();
        if (
          condition_lower.includes("clear") ||
          condition_lower.includes("sun")
        ) {
          return "fas fa-sun";
        } else if (condition_lower.includes("rain")) {
          return "fas fa-cloud-rain";
        } else if (condition_lower.includes("cloud")) {
          return "fas fa-cloud";
        } else if (condition_lower.includes("snow")) {
          return "fas fa-snowflake";
        } else if (condition_lower.includes("thunderstorm")) {
          return "fas fa-bolt";
        } else if (
          condition_lower.includes("mist") ||
          condition_lower.includes("fog")
        ) {
          return "fas fa-smog";
        }

        return "fas fa-cloud";
      }

      function getWeatherGradient(condition) {
        const condition_lower = condition.toLowerCase();

        if (
          condition_lower.includes("clear") ||
          condition_lower.includes("sun")
        ) {
          return "sunny";
        } else if (
          condition_lower.includes("rain") ||
          condition_lower.includes("drizzle") ||
          condition_lower.includes("thunderstorm")
        ) {
          return "rainy";
        } else if (condition_lower.includes("cloud")) {
          return "cloudy";
        } else if (condition_lower.includes("snow")) {
          return "snow";
        } else if (
          condition_lower.includes("mist") ||
          condition_lower.includes("fog") ||
          condition_lower.includes("haze")
        ) {
          return "mist";
        }

        return "cloudy";
      }

      function getWindDirection(degrees) {
        const directions = [
          "N",
          "NNE",
          "NE",
          "ENE",
          "E",
          "ESE",
          "SE",
          "SSE",
          "S",
          "SSW",
          "SW",
          "WSW",
          "W",
          "WNW",
          "NW",
          "NNW",
        ];
        return directions[Math.round(degrees / 22.5) % 16];
      }

      function getAQIStatus(aqi) {
        if (aqi <= 50) return "Good";
        if (aqi <= 100) return "Moderate";
        if (aqi <= 150) return "Unhealthy for Sensitive Groups";
        if (aqi <= 200) return "Unhealthy";
        if (aqi <= 300) return "Very Unhealthy";
        return "Hazardous";
      }

      function getAQIColor(aqi) {
        if (aqi <= 50) return "#22c55e";
        if (aqi <= 100) return "#eab308";
        if (aqi <= 150) return "#f97316";
        if (aqi <= 200) return "#ef4444";
        if (aqi <= 300) return "#a855f7";
        return "#dc2626";
      }

      function formatTime(timestamp) {
        return new Date(timestamp * 1000).toLocaleTimeString("en-US", {
          hour: "numeric",
          minute: "2-digit",
          hour12: true,
        });
      }

      function formatRelativeTime(timestamp) {
        const now = Date.now();
        const diff = now - timestamp;
        const minutes = Math.floor(diff / (1000 * 60));

        if (minutes < 1) {
          return "Just now";
        } else if (minutes === 1) {
          return "1 minute ago";
        } else if (minutes < 60) {
          return `${minutes} minutes ago`;
        } else {
          const hours = Math.floor(minutes / 60);
          if (hours === 1) {
            return "1 hour ago";
          } else {
            return `${hours} hours ago`;
          }
        }
      }

      function processDailyForecast(forecastList) {
        const dailyMap = new Map();

        forecastList.forEach((item) => {
          const date = new Date(item.dt * 1000);
          const dayKey = date.toDateString();

          if (!dailyMap.has(dayKey)) {
            dailyMap.set(dayKey, {
              date: date.toLocaleDateString("en-US", {
                month: "short",
                day: "numeric",
              }),
              dayName: getDayName(date),
              high: item.main.temp_max,
              low: item.main.temp_min,
              condition: item.weather[0].main,
              description: item.weather[0].description,
              icon: item.weather[0].icon,
              precipitation: Math.round((item.pop || 0) * 100),
            });
          } else {
            const existing = dailyMap.get(dayKey);
            existing.high = Math.max(existing.high, item.main.temp_max);
            existing.low = Math.min(existing.low, item.main.temp_min);
          }
        });

        return Array.from(dailyMap.values());
      }

      function getDayName(date) {
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(today.getDate() + 1);

        if (date.toDateString() === today.toDateString()) {
          return "Today";
        } else {
          return date.toLocaleDateString("en-US", { weekday: "short" });
        }
      }

      // State management functions
      function showLoading() {
        document.getElementById("loadingState").classList.remove("hidden");
        document.getElementById("errorState").classList.add("hidden");
        document.getElementById("weatherContent").classList.add("hidden");
      }

      function hideLoading() {
        document.getElementById("loadingState").classList.add("hidden");
      }

      function showError() {
        document.getElementById("errorState").classList.remove("hidden");
        document.getElementById("weatherContent").classList.add("hidden");
      }

      function showWeatherContent() {
        document.getElementById("weatherContent").classList.remove("hidden");
        document.getElementById("errorState").classList.add("hidden");
      }

      function retryWeatherLoad() {
        if (currentLocation) {
          loadWeatherData();
        } else {
          getUserLocation();
        }
      }
    </script>
  </body>
</html>
